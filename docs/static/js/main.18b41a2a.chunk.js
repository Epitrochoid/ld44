(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,a,t){e.exports=t(26)},18:function(e,a,t){},19:function(e,a,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},20:function(e,a,t){},25:function(e,a,t){},26:function(e,a,t){"use strict";t.r(a);var c=t(0),n=t.n(c),s=t(9),o=t.n(s),l=(t(18),t(2)),r=t(3),i=t(6),d=t(4),m=t(1),f=t(5),u=(t(19),t(20),t(10)),p=t(11),h=t(7),v=(t(24),t(25),{BASE_HIT_NUMBER:8,HIT_DICE_SIDES:12});function y(e,a){console.log("In resolveMelee");var t,c=v.BASE_HIT_NUMBER+e.stats.acc-a.stats.eva+Math.floor(Math.random()*v.HIT_DICE_SIDES+1),n=Math.max(function(e,a){return e.baseDmg+e.stats.str-a.stats.def}(e,a),0);if(c<=1)t="".concat(e.name," fails to land a hit! ").concat(a.name," received no damage!");else if(c<=10&&c>=2){var s=Math.floor(.5*n);a.hp=a.hp-s,t="".concat(e.name," lands a glancing blow upon ").concat(a.name,". ").concat(s," damage was dealt")}else if(c>=20){var o=Math.max(2*n,1);a.hp=a.hp-o,t="".concat(e.name," lands a critical hit! ").concat(o," damage oozes out from ").concat(a.name)}else a.hp=a.hp-n,t="".concat(e.name," hits ").concat(a.name,". ").concat(n," damage was dealt");return console.log("Out resolveMelee"),{attacker:e,defender:a,logMessage:t}}var b=[{id:0,name:"Earthquake",type:"damage",cost:{str:1},effect:{damage:5}},{id:1,name:"Blood Boil",type:"damage",cost:{def:1},effect:{damage:5}},{id:2,name:"Bolt Throw",type:"damage",cost:{acc:1},effect:{damage:5}},{id:3,name:"Shadow Strike",type:"damage",cost:{eva:1},effect:{damage:5}},{id:4,name:"Sap",type:"debuff",cost:{acc:1},effect:{debuffStr:5}},{id:5,name:"Fraility",type:"debuff",cost:{eva:1},effect:{debuffStr:5}},{id:6,name:"Bewilder",type:"debuff",cost:{acc:1},effect:{debuffDef:5}},{id:7,name:"Spore Cloud",type:"debuff",cost:{eva:1},effect:{debuffDef:5}},{id:8,name:"Haze",type:"debuff",cost:{str:1},effect:{debuffAcc:5}},{id:9,name:"Dust Devil",type:"debuff",cost:{def:1},effect:{debuffAcc:5}},{id:10,name:"Sand Trap",type:"debuff",cost:{str:1},effect:{debuffEva:5}},{id:11,name:"Freeze",type:"debuff",cost:{def:1},effect:{debuffEva:5}},{id:12,name:"Cauterize",type:"heal",cost:{con:1},effect:{heal:1}},{id:13,name:"Cauterize",type:"heal",cost:{con:1},effect:{heal:1}},{id:14,name:"Cauterize",type:"heal",cost:{con:1},effect:{heal:1}}];var g=function(e){if(e>=b.length)return b;for(var a=[];a.length<e;){var t=Math.floor(Math.random()*b.length);-1===a.indexOf(t)&&a.push(t)}var c=[];return a.forEach(function(e){c.push(b[e])}),c},E=function(e){function a(){var e;return Object(l.a)(this,a),(e=Object(i.a)(this,Object(d.a)(a).call(this))).castSpell=function(a){console.log("in cast spell",a,Object(m.a)(e));var t=e.addLogMessage(e.state.combatLog,"You cast ".concat(a.name)),c=function(e,a,t){var c;return t.cost.str&&(e.stats.str=e.stats.str-t.cost.str),t.cost.def&&(e.stats.def=e.stats.def-t.cost.def),t.cost.acc&&(e.stats.acc=e.stats.acc-t.cost.acc),t.cost.eva&&(e.stats.eva=e.stats.eva-t.cost.eva),t.cost.con&&(e.stats.con=e.stats.con-t.cost.con),t.effect.damage&&(a.hp=a.hp-t.effect.damage,c="".concat(a.name," is seared for ").concat(t.effect.damage," magical damage!")),t.effect.debuffStr&&(a.stats.str=Math.max(a.stats.str-t.effect.debuffStr,0),c="".concat(a.name," appears to struggle lifting their weapon")),t.effect.debuffDef&&(a.stats.def=Math.max(a.stats.def-t.effect.debuffDef,0),c="".concat(a.name," looks confused and is no longer bracing themselves against an attack")),t.effect.debuffAcc&&(a.stats.acc=Math.max(a.stats.acc-t.effect.debuffAcc,0),c="".concat(a.name," squints their eyes as they look off to your left")),t.effect.debuffEva&&(a.stats.eva=Math.max(a.stats.eva-t.effect.debuffEva,0),c="".concat(a.name," stumbles around as they loose their footing")),t.effect.heal&&(e.hp=e.stats.con,c="As your wounds close, you feel much better.  Kind of..."),{attacker:e,defender:a,logMessage:c}}(e.state.player,e.state.enemy,a);c.attacker.cards=[];var n=e.addLogMessage(t,c.logMessage);e.setState({player:c.attacker,enemy:c.defender,enableAction:!1,combatLog:n})},e.state={player:{stats:{}},enemy:{stats:{}},enableAction:!0,combatLog:[]},e._displayActions=e.displayActions.bind(Object(m.a)(e)),e._attack=e.attack.bind(Object(m.a)(e)),e._defend=e.defend.bind(Object(m.a)(e)),e._draw=function(){var a;return(a=e).draw.apply(a,arguments)},e}return Object(f.a)(a,e),Object(r.a)(a,[{key:"displayActions",value:function(){return this.state.player.cards&&0!==this.state.player.cards.length?n.a.createElement("div",{className:"button-box"}):n.a.createElement("div",{className:"button-box"},n.a.createElement(h.AwesomeButton,{type:"primary",onPress:this._attack},"Attack"),n.a.createElement(h.AwesomeButton,{type:"secondary",onPress:this._draw},"Cast Blood Magic"))}},{key:"attack",value:function(){if(console.log("In attack"),this.state.enableAction){var e=y(this.state.player,this.state.enemy);console.log("!!",e);var a=this.addLogMessage(this.state.combatLog,e.logMessage);this.setState({player:e.attacker,enemy:e.defender,enableAction:!1,combatLog:a})}}},{key:"defend",value:function(){console.log("In defend (being attacked)");var e=y(this.state.enemy,this.state.player),a=this.addLogMessage(this.state.combatLog,e.logMessage);this.setState({player:e.defender,enemy:e.attacker,enableAction:!0,combatLog:a})}},{key:"draw",value:function(){console.log("draw");var e=this.state,a=e.player;(0,e.updatePlayer)(Object(p.a)({},a,{cards:Object(u.a)(g(3))}))}},{key:"addLogMessage",value:function(e,a){for(e.unshift(a);e.length>10;)e.pop();return e}},{key:"displayEntity",value:function(e){return n.a.createElement("div",{className:"entity-data"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"info-column column"},e.name),n.a.createElement("div",{className:"stat-name-column column"},"Str"),n.a.createElement("div",{className:"stat-value-column column"},e.stats.str)),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"info-column column"},"Base DMG: ",e.baseDmg),n.a.createElement("div",{className:"stat-name-column column"},"Def"),n.a.createElement("div",{className:"stat-value-column column"},e.stats.def)),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"info-column column"},"HP: ",e.hp),n.a.createElement("div",{className:"stat-name-column column"},"Acc"),n.a.createElement("div",{className:"stat-value-column column"},e.stats.acc)),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"info-column column"}),n.a.createElement("div",{className:"stat-name-column column"},"Eva"),n.a.createElement("div",{className:"stat-value-column column"},e.stats.eva)),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"info-column column"}),n.a.createElement("div",{className:"stat-name-column column"},"Const"),n.a.createElement("div",{className:"stat-value-column column"},e.stats.con)))}},{key:"componentWillReceiveProps",value:function(e){var a=e.player,t=e.enemy,c=e.updatePlayer;this.setState({player:a,enemy:t,updatePlayer:c})}},{key:"componentDidUpdate",value:function(e){console.log("in component did update",e),!1===this.state.enableAction&&this.defend()}},{key:"render",value:function(){return n.a.createElement("div",null,this.displayEntity(this.state.player),this.displayEntity(this.state.enemy),this.displayActions(),n.a.createElement(k,{cards:this.state.player.cards,handler:this.castSpell}),n.a.createElement(w,{logs:this.state.combatLog}))}}]),a}(c.Component),k=function(e){var a=e.cards,t=void 0===a?[]:a,c=e.handler,s=void 0===c?function(){}:c;return n.a.createElement("div",{className:"hand"},t.map(function(e){return n.a.createElement("div",{className:"card",key:e.id},n.a.createElement("div",{className:"title"},e.name),n.a.createElement("div",{className:"spacing"},n.a.createElement("strong",null,"Cost:")," ",function(e){var a=[];e.str&&a.push("-".concat(e.str," STR"));e.def&&a.push("-".concat(e.def," DEF"));e.acc&&a.push("-".concat(e.acc," ACC"));e.eva&&a.push("-".concat(e.eva," EVA"));e.con&&a.push("-".concat(e.con," CON"));return a.join(", ")}(e.cost),n.a.createElement("br",null),n.a.createElement("strong",null,"Effect:")," ",function(e){var a=[];e.damage&&a.push("Deals ".concat(e.damage," magical damage"));e.debuffStr&&a.push("Lowers enemy STR by ".concat(e.debuffStr));e.debuffDef&&a.push("Lowers enemy DEF by ".concat(e.debuffDef));e.debuffAcc&&a.push("Lowers enemy ACC by ".concat(e.debuffAcc));e.debuffEva&&a.push("Lowers enemy EVA by ".concat(e.debuffEva));e.heal&&a.push("Heals your HP back to full");return a.join("<br/>")}(e.effect),n.a.createElement("br",null)),n.a.createElement("button",{className:"action",onClick:function(){s(e)}},"Play!"))}))},w=function(e){var a=e.logs,t=void 0===a?[]:a;return n.a.createElement("div",{className:"log-container"},"Combat Log:",t.map(function(e){return n.a.createElement("div",{className:"log-message"},e)}))};var N=E,S={name:"Player",stats:{acc:10,eva:10,str:10,def:10,con:10},baseDmg:2,hp:10,cards:[]},A=function(e){function a(){var e;return Object(l.a)(this,a),(e=Object(i.a)(this,Object(d.a)(a).call(this))).state={player:{stats:{},baseDmg:2,cards:[]}},e.updatePlayer=e.updatePlayer.bind(Object(m.a)(e)),e}return Object(f.a)(a,e),Object(r.a)(a,[{key:"updatePlayer",value:function(e){this.setState({player:e})}},{key:"componentDidMount",value:function(){this.setState({player:S});this.setState({enemy:{name:"Reaper",stats:{acc:10,eva:10,str:8,def:5,con:10},baseDmg:1,hp:10}})}},{key:"render",value:function(){return n.a.createElement("div",{className:"World"},n.a.createElement(N,{player:this.state.player,enemy:this.state.enemy,updatePlayer:this.updatePlayer}))}}]),a}(c.Component);var M=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(A,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[12,1,2]]]);
//# sourceMappingURL=main.18b41a2a.chunk.js.map