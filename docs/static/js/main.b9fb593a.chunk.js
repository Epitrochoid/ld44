(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(24)},16:function(e,t,a){},17:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},18:function(e,t,a){},23:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(9),o=a.n(s),l=(a(16),a(2)),r=a(3),i=a(6),m=a(4),d=a(1),u=a(5),f=(a(17),a(18),a(7)),v=(a(22),a(23),{BASE_HIT_NUMBER:8,HIT_DICE_SIDES:12});function h(e,t){console.log("In resolveMelee");var a,n=v.BASE_HIT_NUMBER+e.stats.acc-t.stats.eva+Math.floor(Math.random()*v.HIT_DICE_SIDES+1),c=Math.max(function(e,t){return e.baseDmg+e.stats.str-t.stats.def}(e,t),0);if(n<=1)a="".concat(e.name," fails to land a hit! ").concat(t.name," received no damage!");else if(n<=10&&n>=2){var s=Math.floor(.5*c);t.hp=t.hp-s,a="".concat(e.name," lands a glancing blow upon ").concat(t.name,". ").concat(s," damage was dealt")}else if(n>=20){var o=Math.max(2*c,1);t.hp=t.hp-o,a="".concat(e.name," lands a critical hit! ").concat(o," damage oozes out from ").concat(t.name)}else t.hp=t.hp-c,a="".concat(e.name," hits ").concat(t.name,". ").concat(c," damage was dealt");return console.log("Out resolveMelee"),{attacker:e,defender:t,logMessage:a}}var p=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).castSpell=function(t){console.log("in cast spell",t,Object(d.a)(e));var a=e.addLogMessage(e.state.combatLog,"You cast ".concat(t.name)),n=function(e,t,a){var n;return a.cost.str&&(e.stats.str=e.stats.str-a.cost.str),a.cost.def&&(e.stats.def=e.stats.def-a.cost.def),a.cost.acc&&(e.stats.acc=e.stats.acc-a.cost.acc),a.cost.eva&&(e.stats.eva=e.stats.eva-a.cost.eva),a.cost.con&&(e.stats.con=e.stats.con-a.cost.con),a.effect.damage&&(t.hp=t.hp-a.effect.damage,n="".concat(t.name," is seared for ").concat(a.effect.damage," magical damage!")),a.effect.debuffStr&&(t.stats.str=Math.max(t.stats.str-a.effect.debuffStr,0),n="".concat(t.name," appears to struggle lifting their weapon")),a.effect.debuffDef&&(t.stats.def=Math.max(t.stats.def-a.effect.debuffDef,0),n="".concat(t.name," looks confused and is no longer bracing themselves against an attack")),a.effect.debuffAcc&&(t.stats.acc=Math.max(t.stats.acc-a.effect.debuffAcc,0),n="".concat(t.name," squints their eyes as they look off to your left")),a.effect.debuffEva&&(t.stats.eva=Math.max(t.stats.eva-a.effect.debuffEva,0),n="".concat(t.name," stumbles around as they loose their footing")),a.effect.heal&&(e.hp=e.stats.con,n="As your wounds close, you feel much better.  Kind of..."),{attacker:e,defender:t,logMessage:n}}(e.state.player,e.state.enemy,t);n.attacker.cards=[];var c=e.addLogMessage(a,n.logMessage);e.setState({player:n.attacker,enemy:n.defender,enableAction:!1,combatLog:c})},e.state={player:{stats:{}},enemy:{stats:{}},enableAction:!0,combatLog:[],endEncounter:function(){}},e._displayActions=e.displayActions.bind(Object(d.a)(e)),e._attack=e.attack.bind(Object(d.a)(e)),e._defend=e.defend.bind(Object(d.a)(e)),e._draw=function(){var t;return(t=e).draw.apply(t,arguments)},e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"displayActions",value:function(){return this.state.player.cards&&0!==this.state.player.cards.length?c.a.createElement("div",{className:"button-box"}):c.a.createElement("div",{className:"button-box"},c.a.createElement(f.AwesomeButton,{type:"primary",onPress:this._attack},"Attack"),c.a.createElement(f.AwesomeButton,{type:"secondary",onPress:this._draw},"Cast Blood Magic"))}},{key:"attack",value:function(){if(console.log("In attack"),this.state.enableAction){var e=h(this.state.player,this.state.enemy);console.log("!!",e);var t=this.addLogMessage(this.state.combatLog,e.logMessage);e.defender.hp<=0?this.state.endEncounter(!0,e.attacker):this.setState({player:e.attacker,enemy:e.defender,enableAction:!1,combatLog:t})}}},{key:"defend",value:function(){console.log("In defend (being attacked)");var e=h(this.state.enemy,this.state.player),t=this.addLogMessage(this.state.combatLog,e.logMessage);e.defender.hp<=0?this.state.endEncounter(!1,e.defender):this.setState({player:e.defender,enemy:e.attacker,enableAction:!0,combatLog:t})}},{key:"draw",value:function(){console.log("draw")}},{key:"addLogMessage",value:function(e,t){for(e.unshift(t);e.length>10;)e.pop();return e}},{key:"displayEntity",value:function(e){return c.a.createElement("div",{className:"entity-data"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"info-column column"},e.name),c.a.createElement("div",{className:"stat-name-column column"},"Str"),c.a.createElement("div",{className:"stat-value-column column"},e.stats.str)),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"info-column column"},"Base DMG: ",e.baseDmg),c.a.createElement("div",{className:"stat-name-column column"},"Def"),c.a.createElement("div",{className:"stat-value-column column"},e.stats.def)),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"info-column column"},"HP: ",e.hp),c.a.createElement("div",{className:"stat-name-column column"},"Acc"),c.a.createElement("div",{className:"stat-value-column column"},e.stats.acc)),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"info-column column"}),c.a.createElement("div",{className:"stat-name-column column"},"Eva"),c.a.createElement("div",{className:"stat-value-column column"},e.stats.eva)),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"info-column column"}),c.a.createElement("div",{className:"stat-name-column column"},"Const"),c.a.createElement("div",{className:"stat-value-column column"},e.stats.con)))}},{key:"componentWillReceiveProps",value:function(e){var t=e.player,a=e.enemy,n=e.endEncounter;this.setState({player:t,enemy:a,endEncounter:n})}},{key:"componentDidUpdate",value:function(e){console.log("in component did update",e),!1===this.state.enableAction&&this.defend()}},{key:"render",value:function(){return c.a.createElement("div",null,this.displayEntity(this.state.player),this.displayEntity(this.state.enemy),this.displayActions(),c.a.createElement(g,{cards:this.state.player.cards,handler:this.castSpell}),c.a.createElement(E,{logs:this.state.combatLog}))}}]),t}(n.Component),g=function(e){var t=e.cards,a=void 0===t?[]:t,n=e.handler,s=void 0===n?function(){}:n;return c.a.createElement("div",{className:"hand"},a.map(function(e){return c.a.createElement("div",{className:"card",key:e.id},c.a.createElement("div",{className:"title"},e.name),c.a.createElement("div",{className:"spacing"},c.a.createElement("strong",null,"Cost:")," ",function(e){var t=[];e.str&&t.push("-".concat(e.str," STR"));e.def&&t.push("-".concat(e.def," DEF"));e.acc&&t.push("-".concat(e.acc," ACC"));e.eva&&t.push("-".concat(e.eva," EVA"));e.con&&t.push("-".concat(e.con," CON"));return t.join(", ")}(e.cost),c.a.createElement("br",null),c.a.createElement("strong",null,"Effect:")," ",function(e){var t=[];e.damage&&t.push("Deals ".concat(e.damage," magical damage"));e.debuffStr&&t.push("Lowers enemy STR by ".concat(e.debuffStr));e.debuffDef&&t.push("Lowers enemy DEF by ".concat(e.debuffDef));e.debuffAcc&&t.push("Lowers enemy ACC by ".concat(e.debuffAcc));e.debuffEva&&t.push("Lowers enemy EVA by ".concat(e.debuffEva));e.heal&&t.push("Heals your HP back to full");return t.join("<br/>")}(e.effect),c.a.createElement("br",null)),c.a.createElement("button",{className:"action",onClick:function(){s(e)}},"Play!"))}))},E=function(e){var t=e.logs,a=void 0===t?[]:t;return c.a.createElement("div",{className:"log-container"},"Combat Log:",a.map(function(e){return c.a.createElement("div",{className:"log-message"},e)}))};var y=p,b={name:"Player",stats:{acc:10,eva:10,str:10,def:10,con:10},baseDmg:2,hp:10,cards:[]},k=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).state={player:{stats:{},baseDmg:2,cards:[]},inEncounter:!0},e._endEncounter=e.endEncounter.bind(Object(d.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"endEncounter",value:function(e,t){console.log("Encounter over, player won: ",e),this.setState({inEncounter:!1})}},{key:"componentDidMount",value:function(){this.setState({player:b});this.setState({enemy:{name:"Reaper",stats:{acc:10,eva:10,str:8,def:5,con:10},baseDmg:1,hp:10}})}},{key:"render",value:function(){return this.state.inEncounter?c.a.createElement("div",{className:"World"},c.a.createElement(y,{player:this.state.player,enemy:this.state.enemy,endEncounter:this._endEncounter})):c.a.createElement("div",null,c.a.createElement("p",null,"No more encounters"))}}]),t}(n.Component);var N=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.b9fb593a.chunk.js.map